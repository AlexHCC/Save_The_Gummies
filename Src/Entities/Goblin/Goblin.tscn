[gd_scene load_steps=22 format=3 uid="uid://c1ny4x7ikhd2j"]

[ext_resource type="Script" path="res://Src/Entities/Goblin/Goblin.gd" id="1_i1jgx"]
[ext_resource type="Script" path="res://Src/Common/StateMachine/StateMachine.gd" id="2_icrb6"]
[ext_resource type="Texture2D" uid="uid://dyyhfhyi43oym" path="res://Assets/Enemies/goblin_sheet.png" id="2_s3wem"]
[ext_resource type="Texture2D" uid="uid://dtnlj4i4wf327" path="res://Assets/Enemies/exclamation_mark.png" id="3_rft8p"]
[ext_resource type="Script" path="res://Src/Entities/Goblin/States/Move.gd" id="3_rvk6g"]
[ext_resource type="Script" path="res://Src/Entities/Goblin/States/Idle.gd" id="4_v4a5c"]
[ext_resource type="Script" path="res://Src/Entities/Goblin/States/Walk.gd" id="5_ty2ch"]

[sub_resource type="AtlasTexture" id="AtlasTexture_rl4pl"]
atlas = ExtResource("2_s3wem")
region = Rect2(0, 0, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_xnl8x"]
atlas = ExtResource("2_s3wem")
region = Rect2(18, 0, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_6pilj"]
atlas = ExtResource("2_s3wem")
region = Rect2(36, 0, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_fovxf"]
atlas = ExtResource("2_s3wem")
region = Rect2(54, 0, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_suau5"]
atlas = ExtResource("2_s3wem")
region = Rect2(0, 18, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_emyc5"]
atlas = ExtResource("2_s3wem")
region = Rect2(18, 18, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_tcvw8"]
atlas = ExtResource("2_s3wem")
region = Rect2(36, 18, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_r1xc0"]
atlas = ExtResource("2_s3wem")
region = Rect2(54, 18, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_usdsm"]
atlas = ExtResource("2_s3wem")
region = Rect2(72, 18, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_wls4c"]
atlas = ExtResource("2_s3wem")
region = Rect2(90, 18, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_8pbgu"]
atlas = ExtResource("2_s3wem")
region = Rect2(108, 18, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_adtfy"]
atlas = ExtResource("2_s3wem")
region = Rect2(126, 18, 18, 18)

[sub_resource type="SpriteFrames" id="SpriteFrames_b24yo"]
animations = [{
"frames": [{
"duration": 2.0,
"texture": SubResource("AtlasTexture_rl4pl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xnl8x")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6pilj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fovxf")
}],
"loop": true,
"name": &"idle",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_suau5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_emyc5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tcvw8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_r1xc0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_usdsm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wls4c")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8pbgu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_adtfy")
}],
"loop": true,
"name": &"walk",
"speed": 12.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jyw6e"]
size = Vector2(6, 12)

[node name="Goblin" type="CharacterBody2D"]
collision_layer = 4
script = ExtResource("1_i1jgx")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
position = Vector2(0, -10)
sprite_frames = SubResource("SpriteFrames_b24yo")
animation = &"idle"
autoplay = "idle"
offset = Vector2(2, 1)

[node name="ExclamationMark" type="Sprite2D" parent="."]
visible = false
position = Vector2(0, -19)
texture = ExtResource("3_rft8p")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -7)
shape = SubResource("RectangleShape2D_jyw6e")

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state", "animated_sprite")]
script = ExtResource("2_icrb6")
initial_state = NodePath("Move/Idle")
animated_sprite = NodePath("../AnimatedSprite2D")

[node name="Move" type="Node" parent="StateMachine" node_paths=PackedStringArray("character")]
script = ExtResource("3_rvk6g")
character = NodePath("../..")
abstract = true

[node name="Idle" type="Node" parent="StateMachine/Move" node_paths=PackedStringArray("move_state", "states_for_transition")]
script = ExtResource("4_v4a5c")
move_state = NodePath("..")
states_for_transition = [NodePath("../Walk")]

[node name="IdleTimer" type="Timer" parent="StateMachine/Move/Idle"]
editor_description = "Time to go from Idle to Walk again."
wait_time = 2.0
one_shot = true

[node name="Walk" type="Node" parent="StateMachine/Move" node_paths=PackedStringArray("move_state", "states_for_transition")]
script = ExtResource("5_ty2ch")
move_state = NodePath("..")
states_for_transition = [NodePath("../Idle")]

[node name="WalkTimer" type="Timer" parent="StateMachine/Move/Walk"]
wait_time = 5.0
one_shot = true
